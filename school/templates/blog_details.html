{% extends 'base.html' %}
{% load static %}
{% block title %}
Blog Details - Book Store
{% endblock %}

{% block content %}
<main class="main">

    <!-- Blog Details Section -->
    <section id="blog-details" class="blog-details section">
        <div class="container" data-aos="fade-up">

            <article class="article">
                <div class="article-header">
                    <div class="meta-categories" data-aos="fade-up">
                        {% for category in post.categories %}
                        <a href="#" class="category">{{ category }}</a>
                        {% endfor %}
                    </div>

                    <h1 class="title" data-aos="fade-up" data-aos-delay="100">{{ post.title }}</h1>

                    <div class="article-meta" data-aos="fade-up" data-aos-delay="200">
                        <div class="author">
                            <img src="{% static post.author_image %}" alt="Author" class="author-img">
                            <div class="author-info">
                                <h4>{{ post.author_name }}</h4>
                                <span>{{ post.author_role }}</span>
                            </div>
                        </div>
                        <div class="post-info">
                            <span><i class="bi bi-calendar4-week"></i> {{ post.date }}</span>
                            <span><i class="bi bi-clock"></i> {{ post.read_time }}</span>
                            <span><i class="bi bi-chat-square-text"></i> {{ post.comment_count }} Comments</span>
                        </div>
                    </div>
                </div>

                <div class="article-featured-image" data-aos="zoom-in">
                    <img src="{% static post.featured_image %}" alt="{{ post.title }}" class="img-fluid">
                </div>

                <div class="article-wrapper">
                    <aside class="table-of-contents" data-aos="fade-left">
                        <h3>Table of Contents</h3>
                        <nav>
                            <ul>
                                {% for section in post.sections %}
                                <li>
                                    <a href="#{{ section.id }}" class="{% if forloop.first %}active{% endif %}">{{ section.title }}</a>
                                </li>
                                {% endfor %}
                            </ul>
                        </nav>
                    </aside>

                    <div class="article-content">
                        {% for section in post.sections %}
                        <div class="content-section" id="{{ section.id }}" data-aos="fade-up">
                            <h2>{{ section.heading }}</h2>
                            <p>{{ section.content|safe }}</p>

                            {% if section.image %}
                            <div class="image-with-caption {{ section.image_position }}">
                                <img src="{% static section.image %}" alt="{{ section.image_alt }}" class="img-fluid" loading="lazy">
                                {% if section.caption %}
                                <figcaption>{{ section.caption }}</figcaption>
                                {% endif %}
                            </div>
                            {% endif %}

                            {% if section.points %}
                            <div class="feature-points">
                                {% for point in section.points %}
                                <div class="point">
                                    <i class="bi {{ point.icon }}"></i>
                                    <div>
                                        <h4>{{ point.title }}</h4>
                                        <p>{{ point.description }}</p>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="article-footer" data-aos="fade-up">
                    <div class="share-article">
                        <h4>Share this article</h4>
                        <div class="share-buttons">
                            {% for network in post.share_networks %}
                            <a href="{{ network.url }}" class="share-button {{ network.name|lower }}">
                                <i class="bi {{ network.icon }}"></i>
                                <span>{{ network.label }}</span>
                            </a>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="article-tags">
                        <h4>Related Topics</h4>
                        <div class="tags">
                            {% for tag in post.tags %}
                            <a href="#" class="tag">{{ tag }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>

            </article>

        </div>
    </section>

    <!-- Blog Comments Section -->
    <section id="blog-comments" class="blog-comments section">
        <div class="container" data-aos="fade-up" data-aos-delay="100">

            <div class="blog-comments-4">
                <div class="comments-header">
                    <h3 class="title">Community Feedback</h3>
                    <div class="comments-stats">
                        <span class="count">{{ post.comment_count }}</span>
                        <span class="label">Comments</span>
                    </div>
                </div>

                <div class="comments-container">
                    {% for comment in comments %}
                    <div class="comment-thread">
                        <div class="comment-box">
                            <div class="comment-wrapper">
                                <div class="avatar-wrapper">
                                    <img src="{% static comment.avatar %}" alt="Avatar" loading="lazy">
                                    <span class="status-indicator"></span>
                                </div>

                                <div class="comment-content">
                                    <div class="comment-header">
                                        <div class="user-info">
                                            <h4>{{ comment.name }}</h4>
                                            <span class="time-badge">
                                                <i class="bi bi-clock"></i>
                                                {{ comment.time }}
                                            </span>
                                        </div>
                                        <div class="engagement">
                                            <span class="likes">
                                                <i class="bi bi-heart"></i>
                                                {{ comment.likes }}
                                            </span>
                                        </div>
                                    </div>

                                    <div class="comment-body">
                                        <p>{{ comment.text }}</p>
                                    </div>

                                    <div class="comment-actions">
                                        <button class="action-btn like-btn" aria-label="Like comment">
                                            <i class="bi bi-heart"></i>
                                            <span>Like</span>
                                        </button>
                                        <button class="action-btn reply-btn" aria-label="Reply to comment">
                                            <i class="bi bi-chat"></i>
                                            <span>Reply</span>
                                        </button>
                                        <button class="action-btn share-btn" aria-label="Share comment">
                                            <i class="bi bi-share"></i>
                                            <span>Share</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            {% if comment.replies %}
                            <div class="replies-container">
                                {% for reply in comment.replies %}
                                <div class="comment-box reply">
                                    <div class="comment-wrapper">
                                        <div class="avatar-wrapper">
                                            <img src="{% static reply.avatar %}" alt="Avatar" loading="lazy">
                                            <span class="status-indicator"></span>
                                        </div>
                                        <div class="comment-content">
                                            <div class="comment-header">
                                                <div class="user-info">
                                                    <h4>{{ reply.name }}</h4>
                                                    <span class="time-badge">
                                                        <i class="bi bi-clock"></i>
                                                        {{ reply.time }}
                                                    </span>
                                                </div>
                                                <div class="engagement">
                                                    <span class="likes">
                                                        <i class="bi bi-heart"></i>
                                                        {{ reply.likes }}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="comment-body">
                                                <p>{{ reply.text }}</p>
                                            </div>
                                            <div class="comment-actions">
                                                <button class="action-btn like-btn" aria-label="Like comment">
                                                    <i class="bi bi-heart"></i>
                                                    <span>Like</span>
                                                </button>
                                                <button class="action-btn reply-btn" aria-label="Reply to comment">
                                                    <i class="bi bi-chat"></i>
                                                    <span>Reply</span>
                                                </button>
                                                <button class="action-btn share-btn" aria-label="Share comment">
                                                    <i class="bi bi-share"></i>
                                                    <span>Share</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% endif %}

                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </section>

    <!-- Blog Comment Form Section -->
    <section id="blog-comment-form" class="blog-comment-form section">
        <div class="container">
            <form action="">
                <h4>Post Comment</h4>
                <p>Your email address will not be published. Required fields are marked *</p>
                <div class="row">
                    <div class="col-md-6 form-group">
                        <input name="name" type="text" class="form-control" placeholder="Your Name*">
                    </div>
                    <div class="col-md-6 form-group">
                        <input name="email" type="text" class="form-control" placeholder="Your Email*">
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <input name="website" type="text" class="form-control" placeholder="Your Website">
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <textarea name="comment" class="form-control" placeholder="Your Comment*"></textarea>
                    </div>
                </div>
                <div class="text-center">
                    <button type="submit" class="btn btn-primary">Post Comment</button>
                </div>
            </form>
        </div>
    </section>

</main>
{% endblock %}